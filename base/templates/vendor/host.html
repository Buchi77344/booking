<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Experience</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</head>
<body> -->
{% extends "base.html" %}
{% load static %}
{% block context %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Experience</title>

    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- Clockpicker CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-clockpicker/0.0.7/css/bootstrap-clockpicker.min.css" rel="stylesheet">

    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

    <!-- Font Awesome for Tooltip Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">


</head>
<style>
    .tooltip-inner {
        max-width: 200px; /* Adjust width for tooltips */
    }
    .input-group-addon {
        cursor: pointer;
    }
</style>

<body>
    <div class="container">
        <h1>Create Experience</h1>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Title -->
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" class="form-control" id="title" name="title" required>
            </div>

            <!-- Description -->
            <div class="form-group">
                <label for="description">Description:</label>
                <textarea class="form-control" id="description" name="description" required></textarea>
            </div>

            <!-- Category -->
            <div class="form-group">
                <label for="category">Category:</label>
                <select class="form-control" id="category" name="category" required>
                    {% for category in categories %}
                    <option value="{{ category.0 }}">{{ category.1 }}</option>
                    {% endfor %}
                </select>
            </div>

            <!-- Location -->
            <div class="form-group">
                <label for="city">City:</label>
                <input type="text" class="form-control" id="city" name="location[city]" placeholder="City" required>
                <label for="location_detail">Detailed Location:</label>
                <input type="text" class="form-control" id="location_detail" name="location[detail]" placeholder="Street/Area">
            </div>

            <!-- Private Group Price with Tooltip -->
            <div class="form-group">
                <label for="private_group_price">Private Group Price:
                    <span data-toggle="tooltip" title="This option allows you to set a fixed price for private group bookings. The price will cover up to a certain number of guests. You can specify the maximum number of guests allowed for this private group booking.">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </label>
                <input type="number" class="form-control" id="private_group_price" name="private_group_price" required>
                <input type="number" class="form-control mt-2" id="max_group_guests" name="max_group_guests" placeholder="Up to (number of guests)">
            </div>

            <!-- Price per Guest with Tooltip -->
            <div class="form-group">
                <label for="price_per_guest">Price per Guest:
                    <span data-toggle="tooltip" title="Set the price each guest will pay to join this experience. The total price will adjust based on the number of guests.">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </label>
                <input type="number" class="form-control" id="price_per_guest" name="price_per_guest" required>
            </div>
            <div class="form-group">
                <label>Price Tiers:
                    <span data-toggle="tooltip" title="Set different prices based on the number of guests: Price for 1-3 Guests, 4-6 Guests, and 7+ Guests. For example: For 1 guest: ₹500, For 4 guests: ₹450 per guest, For 10 guests: ₹400 per guest.">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </label>
                <div>
                    <label for="price_1_3">Price for 1-3 Guests:</label>
                    <input type="number" class="form-control" id="price_1_3" name="price_1_3" required placeholder="Price for 1-3 Guests">
                </div>
                <div>
                    <label for="price_4_6">Price for 4-6 Guests:</label>
                    <input type="number" class="form-control" id="price_4_6" name="price_4_6" required placeholder="Price for 4-6 Guests">
                </div>
                <div>
                    <label for="price_7_plus">Price for 7+ Guests:</label>
                    <input type="number" class="form-control" id="price_7_plus" name="price_7_plus" required placeholder="Price for 7+ Guests">
                </div>
            </div>

            <!-- Extra Services with Tooltip -->
            <div class="form-group">
                <label for="extra_services">Extra Services (per guest, e.g., Photography):
                    <span data-toggle="tooltip" title="Enter the name of any additional service offered as part of this experience. This will be visible to guests.">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </label>
                <div id="extra_services_container">
                    <input type="text" class="form-control mb-2" name="extra_services[]" placeholder="Service Name">
                    <input type="number" class="form-control mb-2" name="extra_service_price[]" placeholder="Price per Guest">
                </div>
                <button type="button" class="btn btn-sm btn-primary" id="add_service_btn">Add Extra Service</button>
            </div>

            <!-- Available Dates with Flatpickr and Tooltip -->
            <div class="form-group">
                <label for="available_dates">Available Dates:
                    <span data-toggle="tooltip" title="Select the dates when this experience will be available for booking.">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </label>
                <input type="text" class="form-control" id="available_dates" name="calendar_view" readonly required placeholder="Select available dates">
            </div>

            <!-- Time Slots with Clockpicker and Tooltip -->
            <div class="form-group">
                <label>Available Time Slots:
                    <span data-toggle="tooltip" title="Indicate the start and end time during which this experience will be held (e.g., 10:00 AM to 1:00 PM).">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </label>
                <div id="time_slots_container">
                    <div class="row time_slot">
                        <div class="col-md-6">
                            <label for="start_time">Start Time:</label>
                            <input type="text" class="form-control" name="start_time[]" placeholder="Select start time" required>
                        </div>
                        <div class="col-md-6">
                            <label for="end_time">End Time:</label>
                            <input type="text" class="form-control" name="end_time[]" placeholder="Select end time" required>
                        </div>
                    </div>
                </div>
                <button type="button" class="btn btn-sm btn-primary mt-2" id="add_time_slot_btn">Add More Time Slot</button>
            </div>


            <!-- Tags -->
            <div class="form-group">
                <label for="tags">Tags:</label>
                <input type="text" class="form-control" id="tags" name="tags">
            </div>

            <!-- Duration with Tooltip -->
            <div class="form-group">
                <label for="duration">Duration:
                    <span data-toggle="tooltip" title="Specify the total length of the experience, including any breaks or additional activities.">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </label>
                <input type="text" class="form-control" id="duration" name="duration" required>
            </div>

            <!-- Special Requirements (Optional) with Tooltip -->
            <div class="form-group">
                <label for="requirements">Special Requirements (Optional):
                    <span data-toggle="tooltip" title="Mention any special requirements for this experience, such as accessibility needs or dietary preferences.">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </label>
                <textarea class="form-control" id="requirements" name="requirements"></textarea>
            </div>

            <!-- What to Bring (Optional) with Tooltip -->
            <div class="form-group">
                <label for="what_to_bring">What to Bring (Optional):
                    <span data-toggle="tooltip" title="List any items guests should bring with them, like comfortable clothing or sunscreen.">
                        <i class="fas fa-info-circle"></i>
                    </span>
                </label>
                <textarea class="form-control" id="what_to_bring" name="what_to_bring"></textarea>
            </div>

            <!-- Minimum and Maximum Guests -->
            <div class="form-group">
                <label for="min_guests">Minimum Guests:</label>
                <input type="number" class="form-control" id="min_guests" name="min_guests" required>
            </div>
            <div class="form-group">
                <label for="max_guests">Maximum Guests:</label>
                <input type="number" class="form-control" id="max_guests" name="max_guests" required>
            </div>

            <!-- Images -->
            <div class="form-group">
                <label for="images">Images:</label>
                <input type="file" class="form-control" id="images" name="images" multiple>
            </div>

            <!-- Videos Upload -->
            <div class="form-group">
                <label for="videos">Upload Videos:</label>
                <input type="file" class="form-control" id="videos" name="videos" multiple>
            </div>

            <button type="submit" class="btn btn-primary">Create Experience</button>
        </form>
    </div>

    <!-- jQuery and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <!-- Clockpicker JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-clockpicker/0.0.7/bootstrap-clockpicker.min.js"></script>

    <script>
        $(document).ready(function () {
            // Initialize tooltips
            $('[data-toggle="tooltip"]').tooltip();

            // Initialize Flatpickr for Available Dates
            flatpickr("#available_dates", {
                mode: "multiple",
                dateFormat: "Y-m-d",
                onClose: function(selectedDates) {
                    const formattedDates = selectedDates.map(date => {
                        return date.toLocaleDateString('en-US', {
                            weekday: 'short',
                            day: '2-digit',
                            month: 'short'
                        });
                    }).join(", ");
                    document.getElementById('available_dates').value = formattedDates;
                }
            });

            // Initialize Flatpickr for dynamic time slots
            function initializeTimePickers() {
                $('.time_slot input[name="start_time[]"]').each(function() {
                    flatpickr(this, {
                        enableTime: true,
                        noCalendar: true,
                        dateFormat: "h:i K", // 12-hour format with AM/PM
                        time_24hr: false,
                    });
                });

                $('.time_slot input[name="end_time[]"]').each(function() {
                    flatpickr(this, {
                        enableTime: true,
                        noCalendar: true,
                        dateFormat: "h:i K", // 12-hour format with AM/PM
                        time_24hr: false,
                    });
                });
            }

            // Initialize the first set of time pickers
            initializeTimePickers();

            // Add more time slots dynamically
            $('#add_time_slot_btn').click(function() {
                const newTimeSlot = `
                    <div class="row time_slot">
                        <div class="col-md-6">
                            <label for="start_time">Start Time:</label>
                            <input type="text" class="form-control" name="start_time[]" placeholder="Select start time" required>
                        </div>
                        <div class="col-md-6">
                            <label for="end_time">End Time:</label>
                            <input type="text" class="form-control" name="end_time[]" placeholder="Select end time" required>
                        </div>
                    </div>
                `;
                $('#time_slots_container').append(newTimeSlot);
                // Reinitialize flatpickr for new time slots
                initializeTimePickers();
            });
        });
    </script>
</body>

</html>


{% endblock context %}
