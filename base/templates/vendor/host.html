{% extends "base.html" %}
{% load static %}
{% block context %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Experience</title>

    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-clockpicker/0.0.7/css/bootstrap-clockpicker.min.css">

    <style>
        .tooltip-inner {
            max-width: 200px; /* Adjust width for tooltips */
        }
        .input-group-addon {
            cursor: pointer;
        }
        .btn-black {
            background-color: black;
            color: white;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Create Experience</h1>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
        
            <!-- 1. Experience Overview -->
            <div class="border p-3 mb-4">
                <h2>Experience Overview</h2>
        
                <div class="form-group">
                    <label for="title">Title of Experience:</label>
                    <input type="text" class="form-control" id="title" name="title" required data-toggle="tooltip" title="Enter the title of the experience you are offering.">
                </div>
        
                <div class="form-group">
                    <label for="description">Description:</label>
                    <textarea class="form-control" id="description" name="description" required data-toggle="tooltip" title="Provide a detailed description of the experience."></textarea>
                </div>
        
                <div class="form-group">
                    <label for="category">Category:</label>
                    <select class="form-control" id="category" name="category" required data-toggle="tooltip" title="Select the appropriate category for your experience.">
                        {% for category in categories %}
                        <option value="{{ category.0 }}">{{ category.1 }}</option>
                        {% endfor %}
                    </select>
                </div>
        
                <div class="form-group">
                    <label for="city">Location:</label>
                    <input type="text" class="form-control" id="city" name="location[city]" placeholder="City" required data-toggle="tooltip" title="Enter the city where the experience takes place.">
                    <input type="text" class="form-control mt-2" id="location_detail" name="location[detail]" placeholder="Street/Area" data-toggle="tooltip" title="Provide additional location details (street or area).">
                </div>
        
                <div class="form-group">
                    <label for="language">Language in Offering:</label>
                    <input type="text" class="form-control" id="language" name="language" required data-toggle="tooltip" title="Specify the language in which the experience is offered.">
                </div>
        
                <div class="form-group">
                    <label for="duration">Duration of Experience:</label>
                    <input type="text" class="form-control" id="duration" name="duration" required data-toggle="tooltip" title="State the duration of the experience.">
                </div>
        
                <div class="form-group">
                    <label for="what_included">What Should Be Included with This Experience:</label>
                    <textarea class="form-control" id="what_included" name="what_included" required data-toggle="tooltip" title="List the items or services that will be provided during the experience."></textarea>
                </div>
        
                <div class="form-group">
                    <label for="images">Images:</label>
                    <input type="file" class="form-control" id="images" name="images" multiple data-toggle="tooltip" title="Upload images related to the experience.">
                </div>
        
                <div class="form-group">
                    <label for="videos">Upload Videos:</label>
                    <input type="file" class="form-control" id="videos" name="videos" multiple data-toggle="tooltip" title="Upload videos showcasing the experience.">
                </div>
            </div>
        
            <!-- 2. Guest Information and Settings -->
            <div class="border p-3 mb-4">
                <h2>Guest Information and Settings</h2>
        
                <div class="form-group">
                    <label for="guests">Guests to Bring With:</label>
                    <input type="number" class="form-control" id="guests" name="guests" required data-toggle="tooltip" title="Specify the number of guests allowed.">
                </div>
        
                <div class="form-group">
                    <label for="group_size">Group Size:</label>
                    <input type="number" class="form-control" id="group_size" name="group_size" required data-toggle="tooltip" title="Specify the maximum group size for this experience.">
                </div>
        
                <div class="form-group">
                    <label for="group_pricing">Group Pricing:</label>
                    <input type="number" class="form-control" id="group_pricing" name="group_pricing" required data-toggle="tooltip" title="Enter the pricing for the group.">
                </div>
        
                <div class="form-group">
                    <label for="booking_settings">Booking Settings:</label>
                    <textarea class="form-control" id="booking_settings" name="booking_settings" required data-toggle="tooltip" title="Set the booking rules and policies."></textarea>
                </div>
        
                <div class="form-group">
                    <label for="advance_notice">Advance Notice:</label>
                    <input type="text" class="form-control" id="advance_notice" name="advance_notice" required data-toggle="tooltip" title="Specify the advance notice time for bookings.">
                </div>
        
                <div class="form-group">
                    <label for="cutoff_first_guest">Cutoff Time for First Guest:</label>
                    <input type="text" class="form-control" id="cutoff_first_guest" name="cutoff_first_guest" required data-toggle="tooltip" title="Enter the cutoff time for the first guest.">
                </div>
        
                <div class="form-group">
                    <label for="cutoff_additional_guests">Cutoff Time for Additional Guests:</label>
                    <input type="text" class="form-control" id="cutoff_additional_guests" name="cutoff_additional_guests" required data-toggle="tooltip" title="Enter the cutoff time for additional guests.">
                </div>
            </div>
        
            <!-- 3. Availability and Scheduling -->
            <div class="border p-3 mb-4">
                <h2>Availability and Scheduling</h2>
        
                <div class="form-group">
                    <label for="available_dates">Availability Calendar:</label>
                    <input type="text" class="form-control" id="available_dates" name="available_dates" readonly required data-toggle="tooltip" title="Select the available dates for this experience.">
                </div>
        
                <div class="form-group">
                    <label>Available Time Slots:</label>
                    <div id="time_slots_container">
                        <div class="row time_slot">
                            <div class="col-md-6">
                                <input type="text" class="form-control" name="start_time[]" placeholder="Select start time" required data-toggle="tooltip" title="Choose the start time for this time slot.">
                            </div>
                            <div class="col-md-6">
                                <input type="text" class="form-control" name="end_time[]" placeholder="Select end time" required data-toggle="tooltip" title="Choose the end time for this time slot.">
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-black mt-3" id="add_time_slot_btn">Add More Time Slot</button>
                </div>
            </div>
        
            <!-- 4. Cancellation Policy -->
            <div class="border p-3 mb-4">
                <h2>Cancellation Policy</h2>
        
                <div class="form-group">
                    <label for="cancellation_option_1">
                        <input type="radio" id="cancellation_option_1" name="cancellation_policy" value="7_day" required data-toggle="tooltip" title="Select if a 7-day cancellation policy applies."> 7-Day Cancellation
                    </label>
                </div>
        
                <div class="form-group">
                    <label for="cancellation_option_2">
                        <input type="radio" id="cancellation_option_2" name="cancellation_policy" value="24_hour" required data-toggle="tooltip" title="Select if a 24-hour cancellation policy applies."> 24-Hour Cancellation
                    </label>
                </div>
            </div>
        
            <button type="submit" class="btn btn-black btn-block mb-3" data-toggle="tooltip" title="Click to submit the experience details.">Create Experience</button>
        </form>
        
    </div>

    <!-- JS for Bootstrap, Flatpickr, Clockpicker, and Tooltips -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-clockpicker/0.0.7/bootstrap-clockpicker.min.js"></script>
    <script>
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
            flatpickr("#available_dates", { mode: "multiple", dateFormat: "Y-m-d" });
            function initializeTimePickers() {
                $('.time_slot input[name="start_time[]"]').each(function() {
                    flatpickr(this, { enableTime: true, noCalendar: true, dateFormat: "h:i K", time_24hr: false });
                });
                $('.time_slot input[name="end_time[]"]').each(function() {
                    flatpickr(this, { enableTime: true, noCalendar: true, dateFormat: "h:i K", time_24hr: false });
                });
            }
            initializeTimePickers();
            $('#add_time_slot_btn').click(function() {
                $('#time_slots_container').append(`
                    <div class="row time_slot">
                        <div class="col-md-6">
                            <input type="text" class="form-control" name="start_time[]" placeholder="Select start time" required>
                        </div>
                        <div class="col-md-6">
                            <input type="text" class="form-control" name="end_time[]" placeholder="Select end time" required>
                        </div>
                    </div>
                `);
                initializeTimePickers();
            });
        });
    </script>
</body>

</html>
{% endblock %}
